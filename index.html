<!doctype html>
<html>

<head>
    <title>Gerador de cartelas de bingo</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="brython.js"></script>
    <script type="text/javascript" src="brython_stdlib.js"></script>
</head>

<style>

body{
    font-family: Arial, Helvetica, sans-serif;
}

table{
    font-size: 30px;
}

td{
    background-color: #ccc;
    padding: 10px 10px 10px 10px;
    border-radius: 0.2em;
    text-align: center;
    cursor: default;
    width: 50px;
    height: 50px;
}

</style>

<body onload="brython()">

<h1>BINGO!</h1>

Clique no botão abaixo para gerar uma nova cartela de bingo:
<br><br>
<button id="botao">Nova</button>

<br><br>

<div id="ticket"></div>

<span>Código da cartela: <span id="ticket_no"></span></span>

<script type="text/python">
from browser import document, alert
from browser.html import TABLE, TR, TD
from bingo import generate_ticket, to_string

def cria_tabela(lista):
    tabela = TABLE()
    for row in range(3):
        tabela <= TR(TD(f"{lista[row][column]}") for column in range(9))
    return tabela

def clica(event):
    num, ticket = generate_ticket()
    numeros = to_string(ticket)
    document["ticket_no"].textContent = str(num)
    document["ticket"].clear()
    document["ticket"] <= cria_tabela(numeros)

    for numero in document.select("td"):
        numero.bind("click", muda_cor)

def alterna_cor(color):
    if color == "rgb(0, 204, 0)":
        return "rgb(204, 204, 204)"
    else:
        return "rgb(0, 204, 0)"

def muda_cor(event):
    element = event.target
    content = element.textContent
    if content != "":
        color = element.style.backgroundColor
        element.style.backgroundColor = alterna_cor(color)

tabela = TABLE()
for row in range(3):
    tabela <= TR(TD() for column in range(9))
document["ticket"] <= tabela

document["botao"].bind("click", clica)

</script>
</body>

</html>